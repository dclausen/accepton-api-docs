<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>AcceptOn API Reference</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <link href="stylesheets/custom_screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/custom_print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["shell","ruby","python"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="ruby">ruby</a>
              <a href="#" data-language-name="python">python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='guides/applications.html'>Applications guide</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to the AcceptOn&rsquo;s API! Our API is heavily inspired by <a href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a>
All responses from our API should be returned in <a href="http://www.json.org">JSON</a> format.
Please only use HTTPS to ensure data privacy, otherwise, we will send flying monkeys to hunt you down.
Beware the monkeys! Seriously, they hurt.</p>

<p>Available client libraries are located at:</p>

<ul>
<li><a href="https://github.com/accepton/accepton-ruby">Ruby</a></li>
<li><a href="https://github.com/accepton/accepton-python">Python</a></li>
<li>More to come Real Soon Now, pinky swear!</li>
</ul>

<h1 id="environments">Environments</h1>

<p>In order to allow for testing, the AcceptOn API is available in the following locations:</p>

<ul>
<li>Staging: https://staging-checkout.accepton.com</li>
<li>Production: https://checkout.accepton.com</li>
</ul>

<p>The staging environment should be used for testing. Please keep in mind that
the data can be deleted at any time.</p>

<p>To actually process payments, the production environment must be used.
To switch to production, simply update the URL and corresponding API KEY,
and if the moon is in the right (meaning both correct and directional) quadrant of the sky, it should &ldquo;Just Work&rdquo;!</p>

<h1 id="getting-started">Getting Started</h1>

<p>First, you&rsquo;ll need to create an account and retrieve your API credentials:</p>

<ol>
<li>If you haven&rsquo;t done so already, please create an account in the Staging environment
<a href="https://staging.accepton.com/sign_up">https://staging.accepton.com/sign_up</a></li>
<li>Link a payment processor such as Stripe or Braintree</li>
<li>Retrieve your API key here: <a href="https://staging.accepton.com/admin/user/profile">https://staging.accepton.com/admin/user/profile</a></li>
</ol>

<p>Next, create a payment form that you&rsquo;ll use to collect payment:</p>

<ol>
<li>Click &ldquo;Create a Form&rdquo; in the bottom left area of the navigation</li>
<li>Copy and paste the generated code to your site</li>
</ol>

<p>Then, make your first transaction using the form:</p>

<ol>
<li>Generate a <a href="#create-a-transaction-token">transaction token</a></li>
<li>Pass the id attribute of the response (aka the token) into the configuration of the AcceptOn form</li>
<li>Profit!</li>
</ol>

<h1 id="authentication">Authentication</h1>

<blockquote>
<p>To authorize, use this code:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://staging-checkout.accepton.com/ping"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer &lt;API KEY&gt;"</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'accepton-ruby'</span>

<span class="n">environment</span> <span class="o">=</span> <span class="ss">:production</span>
<span class="n">client</span> <span class="o">=</span> <span class="no">AcceptOn</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">api_key: </span><span class="no">API_KEY</span><span class="p">,</span> <span class="ss">environment: </span><span class="n">environment</span><span class="p">)</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">from</span> <span class="nn">accepton</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="n">API_KEY</span><span class="p">,</span> <span class="n">environment</span><span class="o">=</span><span class="s">'staging'</span><span class="p">)</span>
</code></pre>

<p>AcceptOn requires an API key to gain access to, well, the actual API. After logging into accepton.com, you&rsquo;ll find your API key by clicking your email address in the top right, My Profile, and then use the Secret key found under the section entitled &ldquo;API KEYS&rdquo;.</p>

<p>AcceptOn expects for this super secret API key to be included in all API requests found in a header that looks like the following:</p>

<p><code class="prettyprint">Authorization: Bearer &lt;API KEY&gt;</code></p>

<p>For the work efficient types (aka lazy), you can also append your API KEY as a parameter named access_token to any request if modifying headers isn&rsquo;t your thing.</p>

<aside class="notice">
  Remember, you must replace API KEY with your unique Secret API key.
</aside>

<h1 id="resources">Resources</h1>

<h2 id="transaction-tokens">Transaction tokens</h2>

<p>A transaction token is used to allow for details such as the amount to charge,
the currency, and application fee to be created dynamically from a trusted
source. This is to ensure that no tampering has been performed prior to
the charge being completed.</p>

<p>This can either be done one time using the &ldquo;Create a Form&rdquo; link after signing
in to https://staging.accepton.com. This is useful for creating a form
with a fixed price.</p>

<p>Or, these tokens can be generated programmatically to support dynamic pricing
using an API client. For instance, this allows for the price and relevant
options to be delayed until the end of the checkout process.</p>

<h3 id="the-transaction-token-object">The Transaction token object</h3>

<h4 id="attributes">Attributes</h4>

<table>
<tr><th>Attribute</th><th>Description</th></tr>
<tr><td><strong>id</strong><br/><em>string</em></td><td>A unique id.</td></tr>
<tr><td><strong>type</strong><br/><em>string</em></td><td>Always &ldquo;transaction&rdquo;.</td></tr>
<tr><td><strong>created</strong><br/><em>string</em></td><td>When the token was created, in iso8601 format.</td></tr>
<tr><td><strong>amount</strong><br/><em>integer</em></td><td>The amount in cents of the transaction.</td></tr>
<tr><td><strong>application_fee</strong><br/><em>integer</em></td><td>The application fee in cents to be passed on to the processor. For use only by <a href="guides/applications.html">Applications</a></td></tr>
<tr><td><strong>currency</strong><br/><em>string</em></td><td>The currency to charge in ISO format (default: usd).</td></tr>
<tr><td><strong>description</strong><br/><em>string</em></td><td>A description of the transaction for your own identification purposes. It could be used to include a name of the item purchased, or a confirmation number, etc.</td></tr>
</table>

<h3 id="create-a-transaction-token">Create a Transaction token</h3>

<blockquote>
<p>Create a Transaction token request</p>
</blockquote>
<pre class="highlight shell"><code>curl https://staging-checkout.accepton.com/v1/tokens <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer &lt;API KEY&gt;"</span> <span class="se">\</span>
  -d <span class="nv">amount</span><span class="o">=</span>1000 <span class="se">\</span>
  -d <span class="nv">description</span><span class="o">=</span><span class="s2">"Hipster Flannel Tshirt"</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'accepton-ruby'</span>

<span class="n">environment</span> <span class="o">=</span> <span class="ss">:production</span>
<span class="n">client</span> <span class="o">=</span> <span class="no">AcceptOn</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">api_key: </span><span class="no">API_KEY</span><span class="p">,</span> <span class="ss">environment: </span><span class="n">environment</span><span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">create_token</span><span class="p">(</span><span class="ss">amount: </span><span class="mi">10_00</span><span class="p">,</span> <span class="ss">description: </span><span class="s2">"Hipster Flannel Tshirt"</span><span class="p">)</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">from</span> <span class="nn">accepton</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="n">API_KEY</span><span class="p">,</span> <span class="n">environment</span><span class="o">=</span><span class="s">'staging'</span><span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">create_token</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">currency</span><span class="o">=</span><span class="s">'usd'</span><span class="p">,</span>
                               <span class="n">description</span><span class="o">=</span><span class="s">'Hipster Flannel Tshirt'</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Create a Transaction token response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"txn_643f20df91f94ff3b6cd614b63228419"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"transaction"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created"</span><span class="p">:</span><span class="s2">"2015-01-16T20:08:17.837Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount"</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span><span class="w">
  </span><span class="s2">"application_fee"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Hipster Flannel Tshirt"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h4 id="arguments">Arguments</h4>

<table>
<tr><th>Argument</th><th>Description</th></tr>
<tr><td><strong>amount</strong><br/><em>integer, required</em></td><td>The amount in cents of the transaction.</td></tr>
<tr><td><strong>application_fee</strong><br/><em>integer, optional</em></td><td>The application fee in cents to be passed on to the processor.</td></tr>
<tr><td><strong>currency</strong><br/><em>string</em></td><td>The currency to charge in ISO format (default: usd).</td></tr>
<tr><td><strong>description</strong><br/><em>string, optional</em></td><td>A description of the transaction for your own identification purposes. It could be used to include a name of the item purchased, or a confirmation number, etc.</td></tr>
<tr><td><strong>merchant_paypal_account</strong><br/><em>string, optional</em></td><td>The merchant&rsquo;s Paypal account when you want to pay a merchant instead of yourself. Can be used with an application fee.</td></tr>
</table>

<h4 id="returns">Returns</h4>

<p>A transaction token object.</p>

<h3 id="retrieve-an-existing-transaction-token">Retrieve an existing Transaction token</h3>

<blockquote>
<p>Retreive a Transaction token request</p>
</blockquote>
<pre class="highlight shell"><code>curl https://staging-checkout.accepton.com/v1/tokens/txn_643f20df91f94ff3b6cd614b63228419 <span class="se">\</span>
  -X GET <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer &lt;API KEY&gt;"</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">TODO</span>
</code></pre>

<blockquote>
<p>Retreive a Transaction token response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"txn_643f20df91f94ff3b6cd614b63228419"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"transaction"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created"</span><span class="p">:</span><span class="s2">"2015-01-16T20:08:17.837Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount"</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span><span class="w">
  </span><span class="s2">"application_fee"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Hipster Flannel Tshirt"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Used to retrieve the details of a transaction token that has previously been
created.</p>

<h4 id="arguments">Arguments</h4>

<table>
<tr><th>Argument</th><th>Description</th></tr>
<tr><td><strong>id</strong><br/><em>string, required</em></td><td>The unique id of the transaction.</td></tr>
</table>

<h4 id="returns">Returns</h4>

<p>A Transaction token object.</p>

<h2 id="refunds">Refunds</h2>

<p>Refunds allow the reversal of a charge that has not already been fully
refunded. Partial refunds are accepted up to the total amount of the
original charge.</p>

<h3 id="the-refund-object">The Refund object</h3>

<h4 id="attributes">Attributes</h4>

<table>
<tr><th>Attribute</th><th>Description</th></tr>
<tr><td><strong>id</strong><br/><em>string</em></td><td>A unique id.</td></tr>
<tr><td><strong>amount</strong><br/><em>integer</em></td><td>The amount in cents of the refund.</td></tr>
<tr><td><strong>created</strong><br/><em>datetime</em></td><td>The time the refund was created.</td></tr>
<tr><td><strong>currency</strong><br/><em>string</em></td><td>The currency to charge in ISO format (default: usd).</td></tr>
<tr><td><strong>metadata</strong><br/><em>hash</em></td><td>Any metadata associated with the refund.</td></tr>
<tr><td><strong>reason</strong><br/><em>string</em></td><td>The reason for the refund.</td></tr>
</table>

<h3 id="create-a-refund">Create a Refund</h3>

<blockquote>
<p>Create a Refund request</p>
</blockquote>
<pre class="highlight shell"><code>curl https://staging-checkout.accepton.com/v1/refunds <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer &lt;API KEY&gt;"</span> <span class="se">\</span>
  -d <span class="nv">amount</span><span class="o">=</span>1000 <span class="se">\</span>
  -d <span class="nv">charge_id</span><span class="o">=</span><span class="s2">"chg_123"</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'accepton-ruby'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">AcceptOn</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">api_key: </span><span class="no">API_KEY</span><span class="p">,</span> <span class="ss">environment: :staging</span><span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">refund</span><span class="p">(</span><span class="ss">amount: </span><span class="mi">10_00</span><span class="p">,</span> <span class="ss">charge_id: </span><span class="s2">"chg_123"</span><span class="p">)</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">from</span> <span class="nn">accepton</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="n">API_KEY</span><span class="p">,</span> <span class="n">environment</span><span class="o">=</span><span class="s">'staging'</span><span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">refund</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">charge_id</span><span class="o">=</span><span class="s">"chg_123"</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Create a Transaction token response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ref_123"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-01-16T22:45:18.357Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usd"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"requested_by_customer"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h4 id="arguments">Arguments</h4>

<table>
<tr><th>Argument</th><th>Description</th></tr>
<tr><td><strong>amount</strong><br/><em>integer, required</em></td><td>The amount in cents to refund.</td></tr>
<tr><td><strong>charge_id</strong><br/><em>string, required</em></td><td>The id of the charge to associate with the refund.</td></tr>
</table>

<h4 id="returns">Returns</h4>

<p>A Refund object.</p>

          <h1 id="errors">Errors</h1>

<p>The AcceptOn API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; Your request is invalid</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; Your API key is wrong</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; The specified resource could not be found</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; We&rsquo;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

          <h1 id="support">Support</h1>

<p>Please contact support@accepton.com with any questions or problems.</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="ruby">ruby</a>
                <a href="#" data-language-name="python">python</a>
          </div>
      </div>
    </div>
  </body>
</html>
