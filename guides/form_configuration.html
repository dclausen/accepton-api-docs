<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>AcceptOn Form Configuration Guide</title>

    <link href="../stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="../stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <link href="../stylesheets/custom_screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="../stylesheets/custom_print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="../javascripts/all.js" type="text/javascript"></script>

  </head>

  <body class="guides guides_form_configuration">
    <div id="top-menu">
      <ul>
        <li><a href="https://accepton.com/admin/dashboard" title="AcceptOn Dashboard">Return to Dashboard</a></li>
      </ul>
    </div>
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <a class="logo" href="https://accepton.com" title="AcceptOn">
        <h1 class="toc-ignore">AcceptOn Developer Documentation</h1>
        <img src="../images/logo.png" />
      </a>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href="/">API docs</a></li>
            <li><a href="/guides/applications.html">Applications guide</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="configuring-the-form">Configuring the Form</h1>

<p>When using the AcceptOn form, you can pass configuration values into the form
via <code class="prettyprint">data</code> attributes. These are all added to the <code class="prettyprint">script</code> element for the
form&rsquo;s JavaScript.</p>
<pre class="highlight html"><code><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"my-container"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://js.accepton.com/scripts/accepton.js"</span>
  <span class="na">data-public-key=</span><span class="s">"pkey_xxxxxxxxxxxxxxxx"</span>
  <span class="na">data-token=</span><span class="s">"txn_yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy"</span>
  <span class="na">data-additional-fields=</span><span class="s">"name,phone,billing_address,shipping_address"</span>
  <span class="na">data-customer-email=</span><span class="s">"customer@example.com"</span>
  <span class="na">data-redirect-uri=</span><span class="s">"https://example.com"</span>
  <span class="na">data-success-callback=</span><span class="s">"myCallback"</span>
  <span class="na">data-target=</span><span class="s">"my-container"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>data-public-key</strong> <br> <em>required</em></td>
<td>Your AcceptOn public key. Of the form <code class="prettyprint">pkey_xxxxxx</code>.</td>
</tr>
<tr>
<td><strong>data-token</strong> <br> <em>required</em></td>
<td>Your transaction token representing the transaction for this form. Of the form <code class="prettyprint">txn_xxxxxx</code> (transaction) or <code class="prettyprint">rtx_xxxxxx</code> (recurring).</td>
</tr>
<tr>
<td><strong>data-additional-fields</strong> <br> <em>optional</em></td>
<td>A comma-separated list of additional fields to collect. Valid values are: <em>name</em>, <em>phone</em>, <em>billing_address</em>, and <em>shipping_address</em>.</td>
</tr>
<tr>
<td><strong>data-customer-email</strong> <br> <em>optional</em></td>
<td>The customer&rsquo;s email address, which is used to pre-populate the email field.</td>
</tr>
<tr>
<td><strong>data-redirect-uri</strong> <br> <em>optional</em></td>
<td>The URI to which the form should POST a successful charge.</td>
</tr>
<tr>
<td><strong>data-target</strong> <br> <em>optional</em></td>
<td>The HTML id of the containing element for an inline form.</td>
</tr>
<tr>
<td><strong>data-success-callback</strong> <br> <em>optional</em></td>
<td>The name of a function on <code class="prettyprint">window</code> to call after a successful charge.</td>
</tr>
</tbody></table>

<h1 id="required-attributes">Required Attributes</h1>

<h2 id="public-key">Public Key</h2>
<pre class="highlight html"><code><span class="nt">&lt;script </span><span class="na">data-public-key=</span><span class="s">"pkey_xxxxxxxxxxxxxxxx"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre>

<p>The public key associates the form to your account. You can retrieve your
public key from within the AcceptOn web application.</p>

<h2 id="token">Token</h2>
<pre class="highlight html"><code><span class="nt">&lt;script </span><span class="na">data-token=</span><span class="s">"txn_yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre>

<p>The transaction token sets up the form for the specific transaction you want to
make. You can generate this using the form builder within the AcceptOn web
application or via our API libraries.</p>

<h1 id="optional-attributes">Optional Attributes</h1>

<h2 id="additional-fields">Additional Fields</h2>
<pre class="highlight html"><code><span class="nt">&lt;script </span><span class="na">data-additional-fields=</span><span class="s">"name"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre>

<p>The form can gather metadata about the transaction for you. If any particular
piece of information is required for your payment processor(s), we
automatically configure the form to ask for it.</p>

<p>However, if you wish to gather more information from your customer and want
that data to be attached to your charge, you can specify that we include those
fields in the form via the &ldquo;additional fields&rdquo; configuration.</p>

<p>The attribute should be a comma-separated list of values. The list of values we
can collect include:</p>

<ul>
<li><code class="prettyprint">name</code> - The customer&rsquo;s full name.</li>
<li><code class="prettyprint">phone</code> - The customer&rsquo;s telephone number.</li>
<li><code class="prettyprint">billing_address</code> - The customer&rsquo;s billing address.</li>
<li><code class="prettyprint">shipping_address</code> - The customer&rsquo;s shipping address.</li>
</ul>

<h2 id="customer-email">Customer Email</h2>
<pre class="highlight html"><code><span class="nt">&lt;script </span><span class="na">data-customer-email=</span><span class="s">"customer@example.com"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre>

<p>If you have a dynamic system where you already know the customer&rsquo;s email
address, you can prepopulate the form with it by passing it as a value to the
<code class="prettyprint">customer-email</code> attribute.</p>

<h2 id="redirect-uri">Redirect URI</h2>
<pre class="highlight html"><code><span class="nt">&lt;script </span><span class="na">data-redirect-uri=</span><span class="s">"https://example.com"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre>

<p>The <code class="prettyprint">redirect-uri</code> designates the URI to which we should POST any resulting
charges from the form. We POST the redirect as a <code class="prettyprint">x-www-form-urlencoded</code> POST
with a <code class="prettyprint">response</code> key with a URI-escaped JSON document value.</p>

<p>We POST the form as a redirect, so you must process the charge and show your
customer a page acknowledging the payment.</p>

<p>We <strong>highly</strong> recommend that this endpoint be SSL-enabled with a strong
certificate.</p>

<h2 id="success-callback">Success Callback</h2>
<pre class="highlight html"><code><span class="nt">&lt;script </span><span class="na">data-success-callback=</span><span class="s">"myFunction"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nb">window</span><span class="p">.</span><span class="nx">myFunction</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">charge</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">charge</span><span class="p">;</span>

    <span class="nx">playThatFunkyMusic</span><span class="p">(</span><span class="nx">charge</span><span class="p">);</span>

    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">};</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre>

<p>If you need to perform some behavior on the current page after a charge is
successful, you can use a success callback. Specify a success callback as the
name of a function on the global <code class="prettyprint">window</code> object. The form calls this function
after a successful charge, but before performing a redirect.</p>

<p>The callback function should take one argument that is the response from the
form&rsquo;s charging API. That parameter has a <code class="prettyprint">charge</code> property that is a JSON
representation of the successful charge action.</p>

<p>By default the callback does not prevent a redirect after it fires. To prevent
a redirect to the <code class="prettyprint">redirect-uri</code>, return <code class="prettyprint">false</code> from the callback.</p>

<h2 id="target">Target</h2>
<pre class="highlight html"><code><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"my-identifier"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;script </span><span class="na">data-target=</span><span class="s">"my-identifier"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre>

<p>Specifying a <code class="prettyprint">target</code> turns the form into an inline iframe instead of a modal.
The <code class="prettyprint">target</code> should be the ID of the container in which you&rsquo;d like the form to
appear. For optimal results, the container should be a block-level element that
has a minimum width of at least 300px.</p>

<p>The <code class="prettyprint">target</code> can appear anywhere on the page. By default the form generator
creates the <code class="prettyprint">target</code> immediately prior to the <code class="prettyprint">script</code> element to keep them
logically grouped.</p>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
